<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DGtal: geometry/volumes/fullConvexityShortestPaths3D.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/MathJax.js?config=TeX-MML-AM_CHTML/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DGtal
   &#160;<span id="projectnumber">1.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('geometry_2volumes_2fullConvexityShortestPaths3D_8cpp-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">geometry/volumes/fullConvexityShortestPaths3D.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>This example shows how to use tangency to compute shortest paths on 3D digital objects</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="moduleDigitalConvexityApplications.html#dgtal_dconvexityapp_sec2">Tangency and shortest paths</a></dd></dl>
<p>For instance, you may call it on object "cube+sphere" as</p>
<pre class="fragment">fullConvexityShortestPaths3D cps.vol 0 255 0.0
</pre><p>The user selects two surfels (with shift + left click), and then shortest paths are computed and displayed.</p>
<table class="doxtable">
<tr>
<td><div class="image">
<img src="cps-geodesics-1.jpg" alt="" width="90%"/>
<div class="caption">
Geodesic distances and geodesics on cube+sphere shape</div></div>
 </td><td><div class="image">
<img src="cps-geodesics-2.jpg" alt="" width="90%"/>
<div class="caption">
Geodesic distances on cube+sphere shape</div></div>
 </td><td><div class="image">
<img src="cps-shortest-path.jpg" alt="" width="90%"/>
<div class="caption">
Shortest path between two points</div></div>
  </td></tr>
</table>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;queue&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;DGtal/base/Common.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;DGtal/io/viewers/Viewer3D.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;DGtal/io/DrawWithDisplay3DModifier.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;DGtal/io/Color.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;DGtal/io/colormaps/SimpleDistanceColorMap.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;DGtal/shapes/Shapes.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;DGtal/helpers/StdDefs.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;DGtal/helpers/Shortcuts.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;DGtal/images/ImageContainerBySTLVector.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;DGtal/geometry/volumes/TangencyComputer.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;ConfigExamples.h&quot;</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceDGtal.html">DGtal</a>;</div>
<div class="line"><span class="keyword">typedef</span> <a name="a0"></a><a class="code" href="testSimpleRandomAccessRangeFromPoint_8cpp.html#a38dfaf1641eab4d3fb805df4b52ab10d">Z3i::Space</a>          <a class="code" href="testSimpleRandomAccessRangeFromPoint_8cpp.html#a38dfaf1641eab4d3fb805df4b52ab10d">Space</a>;</div>
<div class="line"><span class="keyword">typedef</span> <a name="a1"></a><a class="code" href="testArithmeticalDSSComputerOnSurfels_8cpp.html#aebe586e91159919ccf2f565d4407fff7">Z3i::KSpace</a>         <a class="code" href="testArithmeticalDSSComputerOnSurfels_8cpp.html#aebe586e91159919ccf2f565d4407fff7">KSpace</a>;</div>
<div class="line"><span class="keyword">typedef</span> <a name="a2"></a><a class="code" href="testSimpleRandomAccessRangeFromPoint_8cpp.html#acd532b318489cd93df57e0b3d136d050">Z3i::Domain</a>         <a class="code" href="testSimpleRandomAccessRangeFromPoint_8cpp.html#acd532b318489cd93df57e0b3d136d050">Domain</a>;</div>
<div class="line"><span class="keyword">typedef</span> <a name="a3"></a><a class="code" href="digitalPolyhedronBuilder3D_8cpp.html#a6c4dc4f5610ba8c9b7ee6e83ecea8d24">Z3i::SCell</a>          <a class="code" href="digitalPolyhedronBuilder3D_8cpp.html#a6c4dc4f5610ba8c9b7ee6e83ecea8d24">SCell</a>;</div>
<div class="line"><span class="keyword">typedef</span> Shortcuts&lt; KSpace &gt; <a name="a4"></a><a class="code" href="testArithmeticalDSSComputerOnSurfels_8cpp.html#ac6834e172d5d8c2b796bc846aa0d643b">SH3</a>;</div>
<div class="line"><span class="keyword">typedef</span> <a name="a5"></a><a class="code" href="testClone2_8cpp.html#a15e9592ccc512dc691b46185e6814758">Space::Point</a>        <a class="code" href="testClone2_8cpp.html#a15e9592ccc512dc691b46185e6814758">Point</a>;</div>
<div class="line"><span class="keyword">typedef</span> <a name="a6"></a><a class="code" href="testTriangulatedSurface_8cpp.html#abb3595c097987c9d2c4f0cc1902df316">Space::RealPoint</a>    <a class="code" href="testTriangulatedSurface_8cpp.html#abb3595c097987c9d2c4f0cc1902df316">RealPoint</a>;</div>
<div class="line"><span class="keyword">typedef</span> <a name="a7"></a><a class="code" href="examplePlaneProbingParallelepipedEstimator_8cpp.html#a23c0623485ed9af765bab12ac424843c">Space::Vector</a>       <a class="code" href="examplePlaneProbingParallelepipedEstimator_8cpp.html#a23c0623485ed9af765bab12ac424843c">Vector</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Called when an user clicks on a surfel.</span></div>
<div class="line"><span class="keywordtype">int</span> <a name="a8"></a><a class="code" href="fullConvexityShortestPaths3D_8cpp.html#a652a071181e7216a6e3d606de345b281">reaction</a>( <span class="keywordtype">void</span>* viewer, <a class="code" href="namespaceDGtal.html#ac1e9ac6a329319ae13c51c0c9e92486a">DGtal::int32_t</a> name, <span class="keywordtype">void</span>* data )</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="namespaceDGtal.html#ac1e9ac6a329319ae13c51c0c9e92486a">DGtal::int32_t</a>* selected = (<a class="code" href="namespaceDGtal.html#ac1e9ac6a329319ae13c51c0c9e92486a">DGtal::int32_t</a>*) data;</div>
<div class="line">  *selected = name;</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Selected surfel=&quot;</span> &lt;&lt; *selected &lt;&lt; std::endl;</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a name="a9"></a><a class="code" href="testArithmeticDSS-benchmark_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv )</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="namespaceDGtal.html#a8fc7012708b0416880a5c8b12dfdf9dd">trace</a>.<a name="a10"></a><a class="code" href="classDGtal_1_1Trace.html#ad054990834d2763627166540087a2980">info</a>() &lt;&lt; <span class="stringliteral">&quot;Usage: &quot;</span> &lt;&lt; argv[ 0 ] &lt;&lt; <span class="stringliteral">&quot; &lt;input.vol&gt; &lt;m&gt; &lt;M&gt; &lt;opt&gt;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">  <a class="code" href="namespaceDGtal.html#a8fc7012708b0416880a5c8b12dfdf9dd">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#ad054990834d2763627166540087a2980">info</a>() &lt;&lt; <span class="stringliteral">&quot;\tComputes shortest paths to a source point&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">  <a class="code" href="namespaceDGtal.html#a8fc7012708b0416880a5c8b12dfdf9dd">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#ad054990834d2763627166540087a2980">info</a>() &lt;&lt; <span class="stringliteral">&quot;\t- input.vol: choose your favorite shape&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">  <a class="code" href="namespaceDGtal.html#a8fc7012708b0416880a5c8b12dfdf9dd">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#ad054990834d2763627166540087a2980">info</a>() &lt;&lt; <span class="stringliteral">&quot;\t- m [==0], M [==255]: used to threshold input vol image&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">  <a class="code" href="namespaceDGtal.html#a8fc7012708b0416880a5c8b12dfdf9dd">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#ad054990834d2763627166540087a2980">info</a>() &lt;&lt; <span class="stringliteral">&quot;\t- opt &gt;= sqrt(3): secure shortest paths, 0: fast&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">  <span class="keywordtype">string</span> inputFilename = examplesPath + <span class="stringliteral">&quot;samples/Al.100.vol&quot;</span>;</div>
<div class="line">  std::string fn= argc &gt; 1 ? argv[ 1 ]         : inputFilename; <span class="comment">//&lt; vol filename</span></div>
<div class="line">  <span class="keywordtype">int</span>         m = argc &gt; 2 ? atoi( argv[ 2 ] ) : 0;   <span class="comment">//&lt; low for thresholding</span></div>
<div class="line">  <span class="keywordtype">int</span>         M = argc &gt; 3 ? atoi( argv[ 3 ] ) : 255; <span class="comment">//&lt; up for thresholding</span></div>
<div class="line">  <span class="keywordtype">double</span>    opt = argc &gt; 4 ? atof( argv[ 4 ] ) : sqrt(3.0); <span class="comment">//&lt; exact (sqrt(3)) or inexact (0) computations</span></div>
<div class="line"> </div>
<div class="line">  QApplication application(argc,argv);</div>
<div class="line">  Viewer3D&lt;&gt; viewer;</div>
<div class="line">  viewer.setWindowTitle(<span class="stringliteral">&quot;fullConvexityShortestPaths3D&quot;</span>);</div>
<div class="line">  viewer.show();  </div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Set up shortcuts parameters.</span></div>
<div class="line">  <span class="keyword">auto</span>   params  = SH3::defaultParameters();</div>
<div class="line">  params( <span class="stringliteral">&quot;thresholdMin&quot;</span>, m )( <span class="stringliteral">&quot;thresholdMax&quot;</span>, M );</div>
<div class="line">  params( <span class="stringliteral">&quot;surfaceComponents&quot;</span> , <span class="stringliteral">&quot;All&quot;</span> );</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// Domain creation from two bounding points.</span></div>
<div class="line">  <a class="code" href="namespaceDGtal.html#a8fc7012708b0416880a5c8b12dfdf9dd">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#ad054990834d2763627166540087a2980">info</a>() &lt;&lt; <span class="stringliteral">&quot;Building set or importing vol ... &quot;</span>;</div>
<div class="line">  <a class="code" href="testArithmeticalDSSComputerOnSurfels_8cpp.html#aebe586e91159919ccf2f565d4407fff7">KSpace</a> <a name="a11"></a><a class="code" href="testCubicalComplex_8cpp.html#a2b87ed989d2519d025bd5d4fbcbac062">K</a>;</div>
<div class="line">  <span class="keyword">auto</span> bimage = SH3::makeBinaryImage( fn, params );</div>
<div class="line">  <a class="code" href="testCubicalComplex_8cpp.html#a2b87ed989d2519d025bd5d4fbcbac062">K</a> = SH3::getKSpace( bimage );</div>
<div class="line">  <a class="code" href="namespaceDGtal.html#a8fc7012708b0416880a5c8b12dfdf9dd">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#ad054990834d2763627166540087a2980">info</a>() &lt;&lt; <span class="stringliteral">&quot;  [Done]&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// Compute surface</span></div>
<div class="line">  <span class="keyword">auto</span> <a name="a12"></a><a class="code" href="dgtalCalculus-geodesic_8cpp.html#a74206273d94e57c9b5aa280170896031">surface</a> = SH3::makeDigitalSurface( bimage, <a class="code" href="testCubicalComplex_8cpp.html#a2b87ed989d2519d025bd5d4fbcbac062">K</a>, params );</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Compute interior boundary points</span></div>
<div class="line">  <span class="comment">// They are less immediate interior points than surfels.</span></div>
<div class="line">  std::vector&lt; Point &gt;   points;</div>
<div class="line">  std::map&lt; SCell, int &gt; surfel2idx;</div>
<div class="line">  std::map&lt; Point, int &gt; point2idx;</div>
<div class="line">  <span class="keywordtype">int</span> idx = 0;</div>
<div class="line">  <span class="keywordflow">for</span> ( <span class="keyword">auto</span> s : (*<a class="code" href="dgtalCalculus-geodesic_8cpp.html#a74206273d94e57c9b5aa280170896031">surface</a>) )</div>
<div class="line">    {</div>
<div class="line">      <span class="comment">// get inside point on the border of the shape.</span></div>
<div class="line">      <a class="code" href="namespaceDGtal.html#a8fbe8c8d47ca5c36ced14284ac62613d">Dimension</a> k = <a class="code" href="testCubicalComplex_8cpp.html#a2b87ed989d2519d025bd5d4fbcbac062">K</a>.sOrthDir( s );</div>
<div class="line">      <span class="keyword">auto</span> voxel  = <a class="code" href="testCubicalComplex_8cpp.html#a2b87ed989d2519d025bd5d4fbcbac062">K</a>.sIncident( s, k, <a class="code" href="testCubicalComplex_8cpp.html#a2b87ed989d2519d025bd5d4fbcbac062">K</a>.sDirect( s, k ) );</div>
<div class="line">      <a class="code" href="testClone2_8cpp.html#a15e9592ccc512dc691b46185e6814758">Point</a> p     = <a class="code" href="testCubicalComplex_8cpp.html#a2b87ed989d2519d025bd5d4fbcbac062">K</a>.sCoords( voxel );</div>
<div class="line">      <span class="keyword">auto</span> it     = point2idx.find( p );</div>
<div class="line">      <span class="keywordflow">if</span> ( it == point2idx.end() )</div>
<div class="line">        {</div>
<div class="line">          points.push_back( p );</div>
<div class="line">          surfel2idx[ s ] = idx;</div>
<div class="line">          point2idx [ p ] = idx++;</div>
<div class="line">        }</div>
<div class="line">      <span class="keywordflow">else</span></div>
<div class="line">        surfel2idx[ s ] = it-&gt;second;</div>
<div class="line">    } </div>
<div class="line">  <a class="code" href="namespaceDGtal.html#a8fc7012708b0416880a5c8b12dfdf9dd">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#ad054990834d2763627166540087a2980">info</a>() &lt;&lt; <span class="stringliteral">&quot;Shape has &quot;</span> &lt;&lt; points.size() &lt;&lt; <span class="stringliteral">&quot; interior boundary points&quot;</span></div>
<div class="line">               &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Select a starting point.</span></div>
<div class="line">  <span class="keyword">typedef</span> Viewer3D&lt;&gt; MViewer3D;</div>
<div class="line">  <a class="code" href="namespaceDGtal.html#ac1e9ac6a329319ae13c51c0c9e92486a">DGtal::int32_t</a> selected_surfels[ 2 ] = { 0, 0 };</div>
<div class="line">  <span class="keyword">auto</span> surfels = SH3::getSurfelRange ( <a class="code" href="dgtalCalculus-geodesic_8cpp.html#a74206273d94e57c9b5aa280170896031">surface</a> );</div>
<div class="line">  <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0;  i &lt; 2; i++ )</div>
<div class="line">    {</div>
<div class="line">      MViewer3D viewerCore( <a class="code" href="testCubicalComplex_8cpp.html#a2b87ed989d2519d025bd5d4fbcbac062">K</a> );</div>
<div class="line">      viewerCore.show();</div>
<div class="line">      Color colSurfel( 200, 200, 255, 255 );</div>
<div class="line">      Color colStart( 255, 0, 0, 255 );</div>
<div class="line">      <a class="code" href="namespaceDGtal.html#ac1e9ac6a329319ae13c51c0c9e92486a">DGtal::int32_t</a> name = 0;</div>
<div class="line">      viewerCore &lt;&lt; SetMode3D( surfels[ 0 ].className(), <span class="stringliteral">&quot;Basic&quot;</span>);</div>
<div class="line">      viewerCore.setFillColor( colSurfel );</div>
<div class="line">      <span class="keywordflow">for</span> ( <span class="keyword">auto</span> &amp;&amp; s : surfels ) viewerCore &lt;&lt; SetName3D( name++ ) &lt;&lt; s;</div>
<div class="line">      viewerCore &lt;&lt; SetSelectCallback3D( <a class="code" href="fullConvexityShortestPaths3D_8cpp.html#a652a071181e7216a6e3d606de345b281">reaction</a>, &amp;selected_surfels[ i ],</div>
<div class="line">                                         0, surfels.size() - 1 );</div>
<div class="line">      viewerCore &lt;&lt; MViewer3D::updateDisplay;</div>
<div class="line">      application.exec();</div>
<div class="line">    }</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// Get selected surfel/point</span></div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> s0 = surfels[ selected_surfels[ 0 ] ];</div>
<div class="line">  <a class="code" href="namespaceDGtal.html#a8fbe8c8d47ca5c36ced14284ac62613d">Dimension</a>  k0 = <a class="code" href="testCubicalComplex_8cpp.html#a2b87ed989d2519d025bd5d4fbcbac062">K</a>.sOrthDir( s0 );</div>
<div class="line">  <span class="keyword">auto</span>   voxel0 = <a class="code" href="testCubicalComplex_8cpp.html#a2b87ed989d2519d025bd5d4fbcbac062">K</a>.sIncident( s0, k0, <a class="code" href="testCubicalComplex_8cpp.html#a2b87ed989d2519d025bd5d4fbcbac062">K</a>.sDirect( s0, k0 ) );</div>
<div class="line">  <a class="code" href="testClone2_8cpp.html#a15e9592ccc512dc691b46185e6814758">Point</a>      p0 = <a class="code" href="testCubicalComplex_8cpp.html#a2b87ed989d2519d025bd5d4fbcbac062">K</a>.sCoords( voxel0 );</div>
<div class="line">  <span class="keyword">auto</span>   start0 = point2idx[ p0 ];</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Start0 index is &quot;</span> &lt;&lt; start0 &lt;&lt; std::endl;</div>
<div class="line">  <span class="keyword">const</span> <span class="keyword">auto</span> s1 = surfels[ selected_surfels[ 1 ] ];</div>
<div class="line">  <a class="code" href="namespaceDGtal.html#a8fbe8c8d47ca5c36ced14284ac62613d">Dimension</a>  k1 = <a class="code" href="testCubicalComplex_8cpp.html#a2b87ed989d2519d025bd5d4fbcbac062">K</a>.sOrthDir( s1 );</div>
<div class="line">  <span class="keyword">auto</span>   voxel1 = <a class="code" href="testCubicalComplex_8cpp.html#a2b87ed989d2519d025bd5d4fbcbac062">K</a>.sIncident( s1, k1, <a class="code" href="testCubicalComplex_8cpp.html#a2b87ed989d2519d025bd5d4fbcbac062">K</a>.sDirect( s1, k1 ) );</div>
<div class="line">  <a class="code" href="testClone2_8cpp.html#a15e9592ccc512dc691b46185e6814758">Point</a>      p1 = <a class="code" href="testCubicalComplex_8cpp.html#a2b87ed989d2519d025bd5d4fbcbac062">K</a>.sCoords( voxel1 );</div>
<div class="line">  <span class="keyword">auto</span>   start1 = point2idx[ p1 ];</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Start1 index is &quot;</span> &lt;&lt; start1 &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// (I) Extracts shortest paths to a target</span></div>
<div class="line"> </div>
<div class="line">  <span class="keyword">typedef</span> <a name="a13"></a><a class="code" href="fullConvexitySphereGeodesics_8cpp.html#ab053a8ae7537e4f87fa9a46962f7617a">TangencyComputer&lt; KSpace &gt;::Index</a> <a class="code" href="fullConvexitySphereGeodesics_8cpp.html#ab053a8ae7537e4f87fa9a46962f7617a">Index</a>;</div>
<div class="line">  TangencyComputer&lt; KSpace &gt; TC( <a class="code" href="testCubicalComplex_8cpp.html#a2b87ed989d2519d025bd5d4fbcbac062">K</a> );</div>
<div class="line">  TC.init( points.cbegin(), points.cend() );</div>
<div class="line">  <span class="keyword">auto</span> SP = TC.makeShortestPaths( opt );</div>
<div class="line">  SP.init( start0 ); <span class="comment">//&lt; set source</span></div>
<div class="line">  <span class="keywordtype">double</span> last_distance = 0.0;</div>
<div class="line">  <span class="keywordflow">while</span> ( ! SP.finished() )</div>
<div class="line">    {</div>
<div class="line">      last_distance = std::get&lt;2&gt;( SP.current() );</div>
<div class="line">      SP.expand();</div>
<div class="line">    }</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Max distance is &quot;</span> &lt;&lt; last_distance &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">  {</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> nb_repetitions = 10;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">double</span>      period = last_distance / nb_repetitions;</div>
<div class="line">    SimpleDistanceColorMap&lt; double &gt; cmap( 0.0, period, <span class="keyword">false</span> );</div>
<div class="line">    MViewer3D viewerCore;</div>
<div class="line">    viewerCore.show();</div>
<div class="line">    Color colSurfel( 200, 200, 255, 128 );</div>
<div class="line">    Color colStart( 255, 0, 0, 128 );</div>
<div class="line"> </div>
<div class="line">    viewerCore.setUseGLPointForBalls(<span class="keyword">true</span>);</div>
<div class="line">    <span class="keywordflow">for</span> ( <span class="keyword">auto</span> i = 0; i &lt; points.size(); ++i )</div>
<div class="line">      {</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">double</span> d_s = SP.distance( i );</div>
<div class="line">        Color c_s        = cmap( fmod( d_s, period ) );</div>
<div class="line">        viewerCore.setFillColor( c_s );</div>
<div class="line">        viewerCore.addBall( <a class="code" href="testTriangulatedSurface_8cpp.html#abb3595c097987c9d2c4f0cc1902df316">RealPoint</a>( points[ i ][ 0 ],</div>
<div class="line">                                       points[ i ][ 1 ],</div>
<div class="line">                                       points[ i ][ 2 ] ), 12.0 );</div>
<div class="line">      }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// JOL: Left if you wish to display it as a surface, and to display paths.</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">// auto surfels = SH3::getSurfelRange ( surface );</span></div>
<div class="line">    <span class="comment">// viewerCore &lt;&lt; SetMode3D( surfels[ 0 ].className(), &quot;Basic&quot;);</span></div>
<div class="line">    <span class="comment">// for ( auto &amp;&amp; s : surfels )</span></div>
<div class="line">    <span class="comment">//   {</span></div>
<div class="line">    <span class="comment">//     const double d_s = SP.distance( surfel2idx[ s ] );</span></div>
<div class="line">    <span class="comment">//     Color c_s        = cmap( fmod( d_s, period ) );</span></div>
<div class="line">    <span class="comment">//     viewerCore.setFillColor( c_s );</span></div>
<div class="line">    <span class="comment">//     viewerCore &lt;&lt; s;</span></div>
<div class="line">    <span class="comment">//   }</span></div>
<div class="line">    <span class="comment">// viewerCore.setFillColor( colStart );</span></div>
<div class="line">    <span class="comment">// viewerCore.setLineColor( Color::Green );</span></div>
<div class="line">    <span class="comment">// viewerCore &lt;&lt; s;</span></div>
<div class="line">    <span class="comment">// for ( Index i = 0; i &lt; SP.size(); i++ ) {</span></div>
<div class="line">    <span class="comment">//   Point p1 = SP.point( i );</span></div>
<div class="line">    <span class="comment">//   Point p2 = SP.point( SP.ancestor( i ) );</span></div>
<div class="line">    <span class="comment">//   viewerCore.addLine( p1, p2, 1.0 );</span></div>
<div class="line">    <span class="comment">// }</span></div>
<div class="line">    viewerCore &lt;&lt; MViewer3D::updateDisplay;</div>
<div class="line">    application.exec();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// (II) Extracts a shortest path between two points.</span></div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> SP0 = TC.makeShortestPaths( opt );</div>
<div class="line">  <span class="keyword">auto</span> SP1 = TC.makeShortestPaths( opt );</div>
<div class="line">  SP0.init( start0 );     <span class="comment">//&lt; source point</span></div>
<div class="line">  SP1.init( start1 );     <span class="comment">//&lt; target point</span></div>
<div class="line">  std::vector&lt; Index &gt; Q; <span class="comment">//&lt; the output shortest path</span></div>
<div class="line">  <span class="keywordflow">while</span> ( ! SP0.finished() &amp;&amp; ! SP1.finished() )</div>
<div class="line">    {</div>
<div class="line">      <span class="keyword">auto</span> n0 = SP0.current();</div>
<div class="line">      <span class="keyword">auto</span> n1 = SP1.current();</div>
<div class="line">      <span class="keyword">auto</span> p0 = std::get&lt;0&gt;( n0 );</div>
<div class="line">      <span class="keyword">auto</span> p1 = std::get&lt;0&gt;( n1 );</div>
<div class="line">      SP0.expand();</div>
<div class="line">      SP1.expand();</div>
<div class="line">      <span class="keywordflow">if</span> ( SP0.isVisited( p1 ) )</div>
<div class="line">        {</div>
<div class="line">          <span class="keyword">auto</span> c0 = SP0.pathToSource( p1 );</div>
<div class="line">          <span class="keyword">auto</span> c1 = SP1.pathToSource( p1 );</div>
<div class="line">          std::copy(c0.rbegin(), c0.rend(), std::back_inserter(Q));</div>
<div class="line">          Q.pop_back();</div>
<div class="line">          std::copy(c1.begin(), c1.end(), std::back_inserter(Q)); </div>
<div class="line">          <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">  <span class="comment">// Q is empty if there is no path.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line">  <span class="comment">// Display computed distances and shortest path</span></div>
<div class="line">  {</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> nb_repetitions = 10;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">double</span>      period = last_distance / nb_repetitions;</div>
<div class="line">    SimpleDistanceColorMap&lt; double &gt; cmap( 0.0, period, <span class="keyword">false</span> );</div>
<div class="line">    MViewer3D viewerCore;</div>
<div class="line">    viewerCore.show();</div>
<div class="line">    Color colSurfel( 200, 200, 255, 128 );</div>
<div class="line">    Color colStart( 255, 0, 0, 128 );</div>
<div class="line">    viewerCore.setUseGLPointForBalls(<span class="keyword">true</span>);</div>
<div class="line">    <span class="keywordflow">for</span> ( <span class="keyword">auto</span> i = 0; i &lt; points.size(); ++i )</div>
<div class="line">      {</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">double</span> d_s0 = SP0.isVisited( i ) ? SP0.distance( i ) : SP0.infinity();</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">double</span> d_s1 = SP1.isVisited( i ) ? SP1.distance( i ) : SP1.infinity();</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">double</span> d_s  = std::min( d_s0, d_s1 );</div>
<div class="line">        Color c_s        = ( d_s != SP0.infinity() )</div>
<div class="line">          ? cmap( fmod( d_s, period ) )</div>
<div class="line">          : Color::Black;</div>
<div class="line">        viewerCore.setFillColor( c_s );</div>
<div class="line">        viewerCore.addBall( <a class="code" href="testTriangulatedSurface_8cpp.html#abb3595c097987c9d2c4f0cc1902df316">RealPoint</a>( points[ i ][ 0 ],</div>
<div class="line">                                       points[ i ][ 1 ],</div>
<div class="line">                                       points[ i ][ 2 ] ), 12 );</div>
<div class="line">      }</div>
<div class="line">    viewerCore.setLineColor( Color::Green );</div>
<div class="line">    <span class="keywordflow">for</span> ( <span class="keyword">auto</span> i = 1; i &lt; Q.size(); i++ )</div>
<div class="line">      {</div>
<div class="line">        <a class="code" href="testClone2_8cpp.html#a15e9592ccc512dc691b46185e6814758">Point</a> p1 = TC.point( Q[ i-1 ] );</div>
<div class="line">        <a class="code" href="testClone2_8cpp.html#a15e9592ccc512dc691b46185e6814758">Point</a> p2 = TC.point( Q[ i   ] );</div>
<div class="line">        viewerCore.addLine( p1, p2, 18.0 );</div>
<div class="line">      }</div>
<div class="line">    viewerCore &lt;&lt; MViewer3D::updateDisplay;</div>
<div class="line">    application.exec();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// (III) Extracts multiple shortest paths between many sources and two targets.</span></div>
<div class="line"> </div>
<div class="line">  std::vector&lt; Index &gt; sources;</div>
<div class="line">  std::vector&lt; Index &gt; dests;</div>
<div class="line">  <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; 20; i++ )</div>
<div class="line">    sources.push_back( rand() % TC.size() );</div>
<div class="line">  dests.push_back( start0 );</div>
<div class="line">  dests.push_back( start1 );</div>
<div class="line">  <span class="keyword">auto</span> paths = TC.shortestPaths( sources, dests, opt );</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Display them.</span></div>
<div class="line">  {</div>
<div class="line">    MViewer3D viewerCore;</div>
<div class="line">    viewerCore.show();</div>
<div class="line">    Color colSurfel( 200, 200, 255, 128 );</div>
<div class="line">    Color colStart( 255, 0, 0, 128 );</div>
<div class="line">    viewerCore.setUseGLPointForBalls(<span class="keyword">true</span>);</div>
<div class="line">    <span class="keywordflow">for</span> ( <span class="keyword">auto</span> i = 0; i &lt; points.size(); ++i )</div>
<div class="line">      {</div>
<div class="line">        viewerCore.setFillColor( Color( 150, 150, 150, 255 ) );</div>
<div class="line">        viewerCore.addBall( <a class="code" href="testTriangulatedSurface_8cpp.html#abb3595c097987c9d2c4f0cc1902df316">RealPoint</a>( points[ i ][ 0 ],</div>
<div class="line">                                       points[ i ][ 1 ],</div>
<div class="line">                                       points[ i ][ 2 ] ), 12 );</div>
<div class="line">      }</div>
<div class="line">    viewerCore.setLineColor( Color::Green );</div>
<div class="line">    <span class="keywordflow">for</span> ( <span class="keyword">auto</span> path : paths )</div>
<div class="line">      {</div>
<div class="line">        <span class="keywordflow">for</span> ( <span class="keyword">auto</span> i = 1; i &lt; path.size(); i++ )</div>
<div class="line">          {</div>
<div class="line">            <a class="code" href="testClone2_8cpp.html#a15e9592ccc512dc691b46185e6814758">Point</a> p1 = TC.point( path[ i-1 ] );</div>
<div class="line">            <a class="code" href="testClone2_8cpp.html#a15e9592ccc512dc691b46185e6814758">Point</a> p2 = TC.point( path[ i   ] );</div>
<div class="line">            viewerCore.addLine( p1, p2, 18.0 );</div>
<div class="line">          }</div>
<div class="line">        <a class="code" href="namespaceDGtal.html#a8fc7012708b0416880a5c8b12dfdf9dd">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#ad054990834d2763627166540087a2980">info</a>() &lt;&lt; <span class="stringliteral">&quot;length=&quot;</span> &lt;&lt; TC.length( path ) &lt;&lt; std::endl;</div>
<div class="line">      }</div>
<div class="line">    viewerCore &lt;&lt; MViewer3D::updateDisplay;</div>
<div class="line">    application.exec();</div>
<div class="line">  }</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"><span class="comment">//                                                                           //</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="ttc" id="aclassDGtal_1_1Trace_html_ad054990834d2763627166540087a2980"><div class="ttname"><a href="classDGtal_1_1Trace.html#ad054990834d2763627166540087a2980">DGtal::Trace::info</a></div><div class="ttdeci">std::ostream &amp; info()</div></div>
<div class="ttc" id="adgtalCalculus-geodesic_8cpp_html_a74206273d94e57c9b5aa280170896031"><div class="ttname"><a href="dgtalCalculus-geodesic_8cpp.html#a74206273d94e57c9b5aa280170896031">surface</a></div><div class="ttdeci">CountedPtr&lt; SH3::DigitalSurface &gt; surface</div><div class="ttdef"><b>Definition:</b> <a href="dgtalCalculus-geodesic_8cpp_source.html#l00066">dgtalCalculus-geodesic.cpp:66</a></div></div>
<div class="ttc" id="adigitalPolyhedronBuilder3D_8cpp_html_a6c4dc4f5610ba8c9b7ee6e83ecea8d24"><div class="ttname"><a href="digitalPolyhedronBuilder3D_8cpp.html#a6c4dc4f5610ba8c9b7ee6e83ecea8d24">SCell</a></div><div class="ttdeci">Z3i::SCell SCell</div><div class="ttdef"><b>Definition:</b> <a href="digitalPolyhedronBuilder3D_8cpp_source.html#l00079">digitalPolyhedronBuilder3D.cpp:79</a></div></div>
<div class="ttc" id="aexamplePlaneProbingParallelepipedEstimator_8cpp_html_a23c0623485ed9af765bab12ac424843c"><div class="ttname"><a href="examplePlaneProbingParallelepipedEstimator_8cpp.html#a23c0623485ed9af765bab12ac424843c">Vector</a></div><div class="ttdeci">DigitalPlane::Point Vector</div><div class="ttdef"><b>Definition:</b> <a href="examplePlaneProbingParallelepipedEstimator_8cpp_source.html#l00045">examplePlaneProbingParallelepipedEstimator.cpp:45</a></div></div>
<div class="ttc" id="afullConvexityShortestPaths3D_8cpp_html_a652a071181e7216a6e3d606de345b281"><div class="ttname"><a href="fullConvexityShortestPaths3D_8cpp.html#a652a071181e7216a6e3d606de345b281">reaction</a></div><div class="ttdeci">int reaction(void *viewer, DGtal::int32_t name, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="fullConvexityShortestPaths3D_8cpp_source.html#l00090">fullConvexityShortestPaths3D.cpp:90</a></div></div>
<div class="ttc" id="afullConvexitySphereGeodesics_8cpp_html_ab053a8ae7537e4f87fa9a46962f7617a"><div class="ttname"><a href="fullConvexitySphereGeodesics_8cpp.html#ab053a8ae7537e4f87fa9a46962f7617a">Index</a></div><div class="ttdeci">SMesh::Index Index</div><div class="ttdef"><b>Definition:</b> <a href="fullConvexitySphereGeodesics_8cpp_source.html#l00117">fullConvexitySphereGeodesics.cpp:117</a></div></div>
<div class="ttc" id="anamespaceDGtal_html"><div class="ttname"><a href="namespaceDGtal.html">DGtal</a></div><div class="ttdoc">DGtal is the top-level namespace which contains all DGtal functions and types.</div></div>
<div class="ttc" id="anamespaceDGtal_html_a8fbe8c8d47ca5c36ced14284ac62613d"><div class="ttname"><a href="namespaceDGtal.html#a8fbe8c8d47ca5c36ced14284ac62613d">DGtal::Dimension</a></div><div class="ttdeci">DGtal::uint32_t Dimension</div><div class="ttdef"><b>Definition:</b> <a href="Common_8h_source.html#l00136">Common.h:136</a></div></div>
<div class="ttc" id="anamespaceDGtal_html_a8fc7012708b0416880a5c8b12dfdf9dd"><div class="ttname"><a href="namespaceDGtal.html#a8fc7012708b0416880a5c8b12dfdf9dd">DGtal::trace</a></div><div class="ttdeci">Trace trace</div><div class="ttdef"><b>Definition:</b> <a href="Common_8h_source.html#l00153">Common.h:153</a></div></div>
<div class="ttc" id="anamespaceDGtal_html_ac1e9ac6a329319ae13c51c0c9e92486a"><div class="ttname"><a href="namespaceDGtal.html#ac1e9ac6a329319ae13c51c0c9e92486a">DGtal::int32_t</a></div><div class="ttdeci">boost::int32_t int32_t</div><div class="ttdoc">signed 32-bit integer.</div><div class="ttdef"><b>Definition:</b> <a href="BasicTypes_8h_source.html#l00072">BasicTypes.h:72</a></div></div>
<div class="ttc" id="atestArithmeticDSS-benchmark_8cpp_html_a3c04138a5bfe5d72780bb7e82a18e627"><div class="ttname"><a href="testArithmeticDSS-benchmark_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a></div><div class="ttdeci">int main(int argc, char **argv)</div><div class="ttdef"><b>Definition:</b> <a href="testArithmeticDSS-benchmark_8cpp_source.html#l00147">testArithmeticDSS-benchmark.cpp:147</a></div></div>
<div class="ttc" id="atestArithmeticalDSSComputerOnSurfels_8cpp_html_ac6834e172d5d8c2b796bc846aa0d643b"><div class="ttname"><a href="testArithmeticalDSSComputerOnSurfels_8cpp.html#ac6834e172d5d8c2b796bc846aa0d643b">SH3</a></div><div class="ttdeci">Shortcuts&lt; KSpace &gt; SH3</div><div class="ttdef"><b>Definition:</b> <a href="testArithmeticalDSSComputerOnSurfels_8cpp_source.html#l00049">testArithmeticalDSSComputerOnSurfels.cpp:49</a></div></div>
<div class="ttc" id="atestArithmeticalDSSComputerOnSurfels_8cpp_html_aebe586e91159919ccf2f565d4407fff7"><div class="ttname"><a href="testArithmeticalDSSComputerOnSurfels_8cpp.html#aebe586e91159919ccf2f565d4407fff7">KSpace</a></div><div class="ttdeci">Z3i::KSpace KSpace</div><div class="ttdef"><b>Definition:</b> <a href="testArithmeticalDSSComputerOnSurfels_8cpp_source.html#l00048">testArithmeticalDSSComputerOnSurfels.cpp:48</a></div></div>
<div class="ttc" id="atestClone2_8cpp_html_a15e9592ccc512dc691b46185e6814758"><div class="ttname"><a href="testClone2_8cpp.html#a15e9592ccc512dc691b46185e6814758">Point</a></div><div class="ttdeci">MyPointD Point</div><div class="ttdef"><b>Definition:</b> <a href="testClone2_8cpp_source.html#l00383">testClone2.cpp:383</a></div></div>
<div class="ttc" id="atestCubicalComplex_8cpp_html_a2b87ed989d2519d025bd5d4fbcbac062"><div class="ttname"><a href="testCubicalComplex_8cpp.html#a2b87ed989d2519d025bd5d4fbcbac062">K</a></div><div class="ttdeci">KSpace K</div><div class="ttdef"><b>Definition:</b> <a href="testCubicalComplex_8cpp_source.html#l00062">testCubicalComplex.cpp:62</a></div></div>
<div class="ttc" id="atestSimpleRandomAccessRangeFromPoint_8cpp_html_a38dfaf1641eab4d3fb805df4b52ab10d"><div class="ttname"><a href="testSimpleRandomAccessRangeFromPoint_8cpp.html#a38dfaf1641eab4d3fb805df4b52ab10d">Space</a></div><div class="ttdeci">SpaceND&lt; 2 &gt; Space</div><div class="ttdef"><b>Definition:</b> <a href="testSimpleRandomAccessRangeFromPoint_8cpp_source.html#l00042">testSimpleRandomAccessRangeFromPoint.cpp:42</a></div></div>
<div class="ttc" id="atestSimpleRandomAccessRangeFromPoint_8cpp_html_acd532b318489cd93df57e0b3d136d050"><div class="ttname"><a href="testSimpleRandomAccessRangeFromPoint_8cpp.html#acd532b318489cd93df57e0b3d136d050">Domain</a></div><div class="ttdeci">HyperRectDomain&lt; Space &gt; Domain</div><div class="ttdef"><b>Definition:</b> <a href="testSimpleRandomAccessRangeFromPoint_8cpp_source.html#l00044">testSimpleRandomAccessRangeFromPoint.cpp:44</a></div></div>
<div class="ttc" id="atestTriangulatedSurface_8cpp_html_abb3595c097987c9d2c4f0cc1902df316"><div class="ttname"><a href="testTriangulatedSurface_8cpp.html#abb3595c097987c9d2c4f0cc1902df316">RealPoint</a></div><div class="ttdeci">PointVector&lt; 3, double &gt; RealPoint</div><div class="ttdef"><b>Definition:</b> <a href="testTriangulatedSurface_8cpp_source.html#l00051">testTriangulatedSurface.cpp:51</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon May 27 2024 11:50:07 for DGtal by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
